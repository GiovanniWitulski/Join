<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: render_board.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: render_board.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Board render Tasks container /////////////////

let toDoTask = []
let newLabel;   
let newSumSubtask;
let newAmountSubtask;
let newSumSubtaskCalc;
let newProgressInPercent;
let newProgressBarId;
let newEmblems;
let newPriority;
let subTaskChecked;
let taskToMove;

/**
 * This function reads in the downloaded Tasks and sorts them due to their type.
 * Afterwards the relative function gets started. 
 * 
 */
function startReadingTasks(){
    for(x=0; x&lt;TaskBoard.length; x++){
        const toDoCard = TaskBoard[x];              
        toDoTask = toDoCard;
            subTaskCheck();
            readInTasks();
        if (toDoCard.type === 0 || toDoCard.type === "0"){
            renderToDo();       }
        if (toDoCard.type === 1 || toDoCard.type === "1"){
            renderInProgress();    }
        if (toDoCard.type === 2 || toDoCard.type === "2"){            
            renderAwaitFeedback();  }
        if (toDoCard.type === 3 || toDoCard.type === "3"){            
            renderDone();   }  }
}

/**
 * This function this function checks if the current read in task has subtasks.
 * 
 */
function subTaskCheck(){ 
    subTaskChecked = 0;  
    if(toDoTask.subtaskSum){
    if (toDoTask.subtaskSum.length > 0){
    subTaskChecked = 1; 
    } else {
        subTaskChecked = 0;
    }    
    }
}

/**
 * This function sets the subtask section to invisible if no subtask is contained at the current task.
 * Afterwards the relative function gets started. 
 * 
 */
function subTaskNoShow(){
    if (subTaskChecked === 0){       
       let idSubtask = 'cardSubtasks' + toDoTask.taskid;
       document.getElementById(idSubtask).classList.add('hidden');
    } 
}

/**
 * This function starts the process of the creating &amp; calculating of the current task.
 * 
 */
function readInTasks(){         
    label(toDoTask); 
    amountSubTasks();
    calcProgressBar();
    descriptionChar();   
    emblemSvg();  
    priorityEmblem();
}

/**
 * This function sets the kind of label for the current task.
 * 
 */
function label(){     
    if(toDoTask.label === 1){
        newLabel = technicalTaskLabel;
    } else {
        newLabel = userStoryLabel;
    }                 
}

/**
 * This function reads out the subtasks of the current task.
 * 
 */
function amountSubTasks(){     
    newAmountSubtask = toDoTask.subtask.length;
    newSumSubtask = 0;
    if(subTaskChecked === 1){
    for (i=0;i&lt;newAmountSubtask;i++){
        newSumSubtask += toDoTask.subtaskSum[i]; //
    }
    }
    if(subTaskChecked === 0){
        newSumSubtask = 0; newAmountSubtask = 0;
    } 
}

/**
 * This function pre-calcualtes the size of the progress bar of the current task.
 * 
 */
function calcProgressBar(){  
    newSumSubtaskCalc = 0;     
    newSumSubtaskCalc = newSumSubtask/newAmountSubtask;      
    if (subTaskChecked === 1){
    newProgressInPercent = newSumSubtaskCalc * 100;}
    if (subTaskChecked === 0){
    newProgressInPercent = 0; 
    }
    newProgressBarId = toDoTask.taskid; 
}

/**
 * This function reads in the description of the current task.
 * 
 */
function descriptionChar(){
    let lastChar = toDoTask.description[toDoTask.description.length - 1];
    if (lastChar === "." || lastChar === "!" || lastChar === "?"){
        toDoTask.description = toDoTask.description.slice(0, -1);
    }                                 
}

/**
 * This function reads in the emblems of the current task.
 * 
 */
function emblemSvg() {            
    newEmblems = '';  
        if (toDoTask.contactEmblem.length > 0){                        
        for (let i = 0; i &lt; toDoTask.contactEmblem.length; i++){
            const svg = toDoTask.contactEmblem[i];
            newEmblems += `&lt;div class="card-contact-emblems-icon">${svg}&lt;/div>`;
            if (i === 3){
                if(toDoTask.contactEmblem.length > 3){
                    let otherEmblems = toDoTask.contactEmblem.length - 4;
                    if (otherEmblems === 0){break;}
                    newEmblems+= `&lt;div class="card-contact-emblems-others" style="font-weight: bold; font-size: 16px;">+${otherEmblems}&lt;/div>`
                }                
                break;}
        } }          
}

/**
 * This function reads in and sets the priority of the current task.
 * 
 */
function priorityEmblem(){
    newPriority = '';
            if (toDoTask.priority){
            if (toDoTask.priority === "low"){
                newPriority = "/assets/svg/capa_priority_low.svg";
            }    else if (toDoTask.priority === "medium"){
                newPriority = "/assets/svg/capa_1_medium_priority.svg";
            }   else if(toDoTask.priority === "urgent") {
                newPriority = "/assets/svg/Capa_2_Burger menue_Arrow_up.svg"}
            }
}

/**
 * This function creates the tasks of the to do section.
 * 
 */
function renderToDo(){
    toDo.innerHTML += `
    &lt;div id="Task${toDoTask.taskid}" class="card-body" onclick="overlayTask(${toDoTask.taskid})" ondragstart="startDragging(${toDoTask.taskid})" draggable="true">
    &lt;div id="cardHeader" class="card-header">${newLabel}&lt;div>&lt;img onclick="renderMoveTask(event, ${x})" class="edit-task-category-svg" src="/assets/svg/arrow-left-line.svg" alt="editCategory">&lt;/div>&lt;/div>
    &lt;div id="cardTitle" class="card-title">&lt;h4>${toDoTask.title}&lt;/h4>&lt;/div>
    &lt;div id="cardDescription" class="card-description">&lt;h4>${toDoTask.description}...&lt;/h4>&lt;/div>
    &lt;div id="cardSubtasks${toDoTask.taskid}" class="card-subtasks">&lt;div class="card-progress-bar">
    &lt;svg width="128" height="8" viewBox="0 0 128 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    &lt;rect width="128" height="8" rx="4" fill="#F4F4F4"/>
    &lt;rect id="${toDoTask.taskid}" width="0" height="8" rx="4" fill="#4589FF"/>&lt;/svg> &lt;/div> 
    &lt;div class="card-sum-subtask">${newSumSubtask}/${newAmountSubtask} Subtasks&lt;/div>&lt;/div>        
    &lt;div id="cardParticipantsPriority" class="card-participants-priority">
    &lt;div class="card-contact-emblems">${newEmblems}&lt;/div>
    &lt;div>&lt;img src="${newPriority}" alt="priority">&lt;/div>
    &lt;/div>&lt;/div>            
    `           
    const progressBar = document.getElementById(newProgressBarId);
    progressBar.setAttribute('width', `${newProgressInPercent}%`);
    subTaskNoShow();
}

/**
 * This function creates the tasks of the in progress section.
 * 
 */
function renderInProgress(){
    inProgress.innerHTML += `
    &lt;div id="Task${toDoTask.taskid}" class="card-body" onclick="overlayTask(${toDoTask.taskid})" ondragstart="startDragging(${toDoTask.taskid})" draggable="true">
    &lt;div id="cardHeader" class="card-header">${newLabel}&lt;img onclick="renderMoveTask(event, ${x})" class="edit-task-category-svg" src="/assets/svg/arrow-left-line.svg" alt="editCategory">&lt;/div>
    &lt;div id="cardTitle" class="card-title">&lt;h4>${toDoTask.title}&lt;/h4>&lt;/div>
    &lt;div id="cardDescription" class="card-description">&lt;h4>${toDoTask.description}...&lt;/h4>&lt;/div>
    &lt;div id="cardSubtasks${toDoTask.taskid}" class="card-subtasks">&lt;div class="card-progress-bar">
    &lt;svg width="128" height="8" viewBox="0 0 128 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    &lt;rect width="128" height="8" rx="4" fill="#F4F4F4"/>
    &lt;rect id="${toDoTask.taskid}" width="0" height="8" rx="4" fill="#4589FF"/>&lt;/svg> &lt;/div> 
    &lt;div class="card-sum-subtask">${newSumSubtask}/${newAmountSubtask} Subtasks&lt;/div>&lt;/div>        
    &lt;div id="cardParticipantsPriority" class="card-participants-priority">
    &lt;div class="card-contact-emblems">${newEmblems}&lt;/div>
    &lt;div>&lt;img src="${newPriority}" alt="priority">&lt;/div>
    &lt;/div>&lt;/div>            
    `           
    const progressBar = document.getElementById(newProgressBarId);
    progressBar.setAttribute('width', `${newProgressInPercent}%`);
    subTaskNoShow();
}

/**
 * This function creates the tasks of the await feedback section.
 * 
 */
function renderAwaitFeedback(){
    awaitFeedback.innerHTML += `
    &lt;div id="Task${toDoTask.taskid}" class="card-body" onclick="overlayTask(${toDoTask.taskid})" ondragstart="startDragging(${toDoTask.taskid})" draggable="true">
    &lt;div id="cardHeader" class="card-header">${newLabel}&lt;img onclick="renderMoveTask(event, ${x})" class="edit-task-category-svg" src="/assets/svg/arrow-left-line.svg" alt="editCategory">&lt;/div>
    &lt;div id="cardTitle" class="card-title">&lt;h4>${toDoTask.title}&lt;/h4>&lt;/div>
    &lt;div id="cardDescription" class="card-description">&lt;h4>${toDoTask.description}...&lt;/h4>&lt;/div>
    &lt;div id="cardSubtasks${toDoTask.taskid}" class="card-subtasks">&lt;div class="card-progress-bar">
    &lt;svg width="128" height="8" viewBox="0 0 128 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    &lt;rect width="128" height="8" rx="4" fill="#F4F4F4"/>
    &lt;rect id="${toDoTask.taskid}" width="0" height="8" rx="4" fill="#4589FF"/>&lt;/svg> &lt;/div> 
    &lt;div class="card-sum-subtask">${newSumSubtask}/${newAmountSubtask} Subtasks&lt;/div>&lt;/div>        
    &lt;div id="cardParticipantsPriority" class="card-participants-priority">
    &lt;div class="card-contact-emblems">${newEmblems}&lt;/div>
    &lt;div>&lt;img src="${newPriority}" alt="priority">&lt;/div>
    &lt;/div>&lt;/div>            
    `           
    const progressBar = document.getElementById(newProgressBarId);
    progressBar.setAttribute('width', `${newProgressInPercent}%`);
    subTaskNoShow();
}

/**
 * This function creates the tasks of the done section.
 * 
 */
function renderDone(){
    done.innerHTML += `
    &lt;div id="Task${toDoTask.taskid}" class="card-body" onclick="overlayTask(${toDoTask.taskid})" ondragstart="startDragging(${toDoTask.taskid})" draggable="true">
    &lt;div id="cardHeader" class="card-header">${newLabel}&lt;img onclick="renderMoveTask(event, ${x})" class="edit-task-category-svg" src="/assets/svg/arrow-left-line.svg" alt="editCategory">&lt;/div>
    &lt;div id="cardTitle" class="card-title">&lt;h4>${toDoTask.title}&lt;/h4>&lt;/div>
    &lt;div id="cardDescription" class="card-description">&lt;h4>${toDoTask.description}...&lt;/h4>&lt;/div>
    &lt;div id="cardSubtasks${toDoTask.taskid}" class="card-subtasks">&lt;div class="card-progress-bar">
    &lt;svg width="128" height="8" viewBox="0 0 128 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    &lt;rect width="128" height="8" rx="4" fill="#F4F4F4"/>
    &lt;rect id="${toDoTask.taskid}" width="0" height="8" rx="4" fill="#4589FF"/>&lt;/svg> &lt;/div> 
    &lt;div class="card-sum-subtask">${newSumSubtask}/${newAmountSubtask} Subtasks&lt;/div>&lt;/div>        
    &lt;div id="cardParticipantsPriority" class="card-participants-priority">
    &lt;div class="card-contact-emblems">${newEmblems}&lt;/div>
    &lt;div>&lt;img src="${newPriority}" alt="priority">&lt;/div>
    &lt;/div>&lt;/div>            
    `           
    const progressBar = document.getElementById(newProgressBarId);
    progressBar.setAttribute('width', `${newProgressInPercent}%`);
    subTaskNoShow();
}

/**
 * This function prepares the HTML sections für being filled with tasks.
 * 
 */
function taskContainer(){             
    toDo.innerHTML = '';
    inProgress.innerHTML = '';
    awaitFeedback.innerHTML = '';
    done.innerHTML = '';
    startReadingTasks();
    ifContainerEmpty();    
}

/**
 * This function sets the placeholder for empty task areas, if needed.
 * 
 */
function ifContainerEmpty(){
    if (toDo.innerHTML == ''){
        toDo.innerHTML = `&lt;img class="placeholder-container-img" src="/assets/svg/no_task_to_do.png" alt="no-task-to-do">`
    }
    if (inProgress.innerHTML == ''){
        inProgress.innerHTML = `&lt;img class="placeholder-container-img" src="/assets/svg/No_tasks_in_progress.png" alt="no-task-in-progress">`
    }
    if (awaitFeedback.innerHTML === '') {
        awaitFeedback.innerHTML = `&lt;img class="placeholder-container-img" src="/assets/svg/no_tasks_awaiting_feedback.png" class="to-do-container-mobile" alt="no-task-awaits-feedback">&lt;/div>`
    }
    if (done.innerHTML === '') {
        done.innerHTML = `&lt;img class="placeholder-container-img" src="/assets/svg/no_tasks_done.png" class="to-do-container-mobile" alt="no-task-done">&lt;/div>`
    }
}

/**
 * This function creates the popup task for further task information.
 * 
 */
function overlayRender(){
    overlay.innerHTML = `
    &lt;div id="${OverlayTask.taskid}" class="overlay-container">
    &lt;div id= "overlayBoard" class="overlay-task transition">
    &lt;div id="overlayHeader" class="overlay-card-header">${overlayLabel}&lt;div class="close-overlay" onclick="closeOverlay()">&lt;/div>&lt;/div>
    &lt;div id="overlayTitle" class="overlay-card-title">${OverlayTask.title}&lt;/div>
    &lt;div id="overlayDescription" class="overlay-card-description">${OverlayTask.description}&lt;/div>
    &lt;div id="overlaydueDate" class="overlay-card-due-date">&lt;div id="overlayDueDate">Due date:&lt;/div>&lt;div class="overlay-due-date">${OverlayTask.date}&lt;/div>&lt;/div>
    &lt;div id="overlaypriority" class="overlay-card-priority">&lt;div id="overlayPriorityText" class="overlay-card-priority-text">
    Priority&lt;/div>&lt;div class="overlay-card-priority-text-img">&lt;img src="${overlayPriority}" alt="priority">${OverlayTask.priority}&lt;/div>
    &lt;/div>
    &lt;div id="overlayAssignedTo" class="overlay-assigned-to">
    &lt;div id="overlayAssignedToText" class="overlay-assigned-to-text">Assigned to:&lt;/div>&lt;div id="overlayParticipants" class="overlay-participants">${overlayContacts}&lt;/div>
    &lt;/div>
    &lt;div class="overlay-card-subtasks">
    &lt;div id="overlaySubstasksText" class="overlay-substasks-text">Subtasks:&lt;/div>
    &lt;div id="overlaySubtaskContainer">${overlaySubtaskStorage}&lt;/div>
    &lt;/div>        
    &lt;div class="overlay-card-delete-edit">
    &lt;div onclick="overlayDeleteTask(${OverlayTask.taskid}, ${overlayTaskBoardPosition})" class="overlay-cde">&lt;div class="overlay-cde-delete-svg">Delete&lt;/div>&lt;/div>&lt;div class="placeholder-div">|&lt;/div>&lt;div onclick="editTaskOverlay(${OverlayTask.taskid}, ${overlayTaskBoardPosition})" class="overlay-cde-edit">&lt;div class="overlay-cde-edit-svg">Edit&lt;/div>&lt;/div>
    &lt;/div>
    &lt;/div>
    &lt;/div>
    `;        
}

/**
 * This function creates the HTML for the task to edit.
 * 
 */
function renderEditTask(){
    overlay.innerHTML = `
    &lt;div id="boardEditTask" class="board-edit-task">
    &lt;div class="close-edit">&lt;div onclick="closeOverlay(${taskIdBoard}, ${taskboardPosition})" class ="close-overlay">&lt;/div>&lt;/div>
    &lt;h4 style="font-weight: 400;">Title&lt;/h4>
    &lt;div id="edit-title" class="edit-title">
    &lt;input type="text" id="titleEdit" class="edit-title-input" value="${editTitle}">
    &lt;/div>
    &lt;h4 style="font-weight: 400;">Description&lt;/h4>
    &lt;div id="edit-description" class="edit-description">
    &lt;textarea id="descriptionEdit" class="edit-description-input">${editDescription}&lt;/textarea>
    &lt;/div>
    &lt;h4 style="font-weight: 400;">Due date&lt;/h4>
    &lt;form action="/action_page.php">
    &lt;label for="calender_input" class="calendar-icon-label">
    &lt;input type="date" id="edit_input" name="date_input" class="date-input" placeholder="tt.mm.jjj">
    &lt;/label>
    &lt;/form>   
    &lt;h4 style="font-weight: 400;">Priority&lt;/h4>
    &lt;div id="editPriorityButtonsdiv" class="edit-priority-buttons-div">&lt;/div>
    &lt;h4 style="font-weight: 400;">Assigned to&lt;/h4>
    &lt;div class="SearchContactEdit">
        &lt;input onclick="checkInputFieldValue();"type="text" id="InputSearchEdit" class="InputSearchEdit" placeholder="Select contacts to assign">
        &lt;div id="ContactListEditButton" class="contact-list-edit-button">
        &lt;img onclick="clickButtonSearch();" src="/assets/svg/arrow_drop_downaa.svg" alt="openContactList">&lt;/div>
    &lt;/div>    
    &lt;div class="edit-contact-list">
    &lt;div id="contact-list-container" class="contact-list-container hiddenMenue">
    ${contactListEdit}
    &lt;/div>&lt;/div> 
    &lt;div id="choosenContacts" class="choosen-contacts">
    &lt;/div>
    &lt;h4 style="font-weight: 400;">Subtasks&lt;/h4>
    &lt;div id="editSubtaskInput" class="edit-subtask-input">
    &lt;input type="text" id="subtaskEdit" class="subtask-edit-input" placeholder="Add new Subtask">&lt;div  class="edit-subtask-add">&lt;img class="edit-subtask-buttons-img-add" onclick="editAddSub()" src="/assets/svg/check_black.svg" alt="addsubtask" width="14" height="14">&lt;div class="placeholder-div-edit-subtask">|&lt;/div>&lt;img class="edit-subtask-buttons-img-delete" onclick="emptyEditSub();" src="/assets/svg/Close_black.svg" alt="delete">&lt;/div>
    &lt;/div>
    &lt;div id="editRenderSubtasks" class="edit-render-subtasks">&lt;/div> 
    &lt;div class="edit-ok-button">&lt;button onclick="storeNewData(${taskboardPosition})" class="edit-button">OK&lt;/button>&lt;/div>
    `
} </code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#amountSubTasks">amountSubTasks</a></li><li><a href="global.html#calcProgressBar">calcProgressBar</a></li><li><a href="global.html#descriptionChar">descriptionChar</a></li><li><a href="global.html#emblemSvg">emblemSvg</a></li><li><a href="global.html#ifContainerEmpty">ifContainerEmpty</a></li><li><a href="global.html#label">label</a></li><li><a href="global.html#overlayRender">overlayRender</a></li><li><a href="global.html#priorityEmblem">priorityEmblem</a></li><li><a href="global.html#readInTasks">readInTasks</a></li><li><a href="global.html#renderAwaitFeedback">renderAwaitFeedback</a></li><li><a href="global.html#renderDone">renderDone</a></li><li><a href="global.html#renderEditTask">renderEditTask</a></li><li><a href="global.html#renderInProgress">renderInProgress</a></li><li><a href="global.html#renderToDo">renderToDo</a></li><li><a href="global.html#startReadingTasks">startReadingTasks</a></li><li><a href="global.html#subTaskCheck">subTaskCheck</a></li><li><a href="global.html#subTaskNoShow">subTaskNoShow</a></li><li><a href="global.html#taskContainer">taskContainer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Thu Jul 11 2024 10:43:41 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
